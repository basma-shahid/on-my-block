{"version":3,"sources":["events.js"],"names":["Event","require","User","module","exports","create","eventForUsers","getAll","req","res","name","body","location","lat","lng","time","user","_id","event","console","log","findById","err","events","push","save","status","json","find","params","populate","exec"],"mappings":";;AAAA,IAAMA,KAAK,GAAGC,OAAO,CAAC,iBAAD,CAArB;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,gBAAD,CAApB,C,CACA;;;AACAE,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,MAAM,EAANA,MADa;AAEbC,EAAAA,aAAa,EAAbA,aAFa;AAGbC,EAAAA,MAAM,EAANA;AAHa,CAAjB,C,CAMA;;AACA,SAAeF,MAAf,CAAsBG,GAAtB,EAA2BC,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAE4BT,KAAK,CAACK,MAAN,CAAa;AAC7BK,YAAAA,IAAI,EAAEF,GAAG,CAACG,IAAJ,CAASD,IADc;AAE7BE,YAAAA,QAAQ,EAAEJ,GAAG,CAACG,IAAJ,CAASC,QAFU;AAG7BC,YAAAA,GAAG,EAAEL,GAAG,CAACG,IAAJ,CAASE,GAHe;AAI7BC,YAAAA,GAAG,EAAEN,GAAG,CAACG,IAAJ,CAASG,GAJe;AAK7BC,YAAAA,IAAI,EAAEP,GAAG,CAACG,IAAJ,CAASI,IALc;AAM7BC,YAAAA,IAAI,EAAER,GAAG,CAACQ,IAAJ,CAASC;AANc,WAAb,CAF5B;;AAAA;AAEcC,UAAAA,KAFd;AAWQC,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCZ,GAAG,CAACQ,IAAxC;AACAG,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BZ,GAAG,CAACQ,IAAJ,CAASC,GAAnC;AAEAf,UAAAA,IAAI,CAACmB,QAAL,CAAcb,GAAG,CAACQ,IAAJ,CAASC,GAAvB,EAA4B,UAAUK,GAAV,EAAeN,IAAf,EAAqB;AAC7CA,YAAAA,IAAI,CAACO,MAAL,CAAYC,IAAZ,CAAiBN,KAAjB;AACAF,YAAAA,IAAI,CAACS,IAAL;AACAN,YAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgClB,IAAI,CAACqB,MAArC;AACH,WAJD;AAKAd,UAAAA,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,wBAArB;AApBR;AAAA;;AAAA;AAAA;AAAA;AAsBQlB,UAAAA,GAAG,CAACkB,IAAJ;;AAtBR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA0BA,SAAepB,MAAf,CAAsBC,GAAtB,EAA2BC,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAE2BT,KAAK,CAAC4B,IAAN,CAAW,EAAX,CAF3B;;AAAA;AAEYL,UAAAA,MAFZ;AAIQd,UAAAA,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBJ,MAArB;AAJR;AAAA;;AAAA;AAAA;AAAA;AAMQd,UAAAA,GAAG,CAACkB,IAAJ;;AANR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAWA,SAAerB,aAAf,CAA6BE,GAA7B,EAAiCC,GAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAE2BT,KAAK,CAAC4B,IAAN,CAAW;AAACZ,YAAAA,IAAI,EAACR,GAAG,CAACqB,MAAJ,CAAWZ;AAAjB,WAAX,EAClBa,QADkB,CACT,MADS,EAElBC,IAFkB,EAF3B;;AAAA;AAEcb,UAAAA,KAFd;AAKQC,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAT,UAAAA,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBT,KAArB;AANR;AAAA;;AAAA;AAAA;AAAA;AASQC,UAAAA,OAAO,CAACC,GAAR;;AATR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["const Event = require('../models/event')\r\nconst User = require('../models/user')\r\n//creat getAll to get all events\r\nmodule.exports = {\r\n    create,\r\n    eventForUsers,\r\n    getAll\r\n}\r\n\r\n//function receives the events from the browser and puts it in the db\r\nasync function create(req, res) {\r\n    try {\r\n        const event = await Event.create({\r\n            name: req.body.name,\r\n            location: req.body.location,\r\n            lat: req.body.lat,\r\n            lng: req.body.lng,\r\n            time: req.body.time,\r\n            user: req.user._id,\r\n\r\n        });\r\n        console.log(event)\r\n        console.log(\"this is the req.user\", req.user)\r\n        console.log(\"this is id\", req.user._id)\r\n\r\n        User.findById(req.user._id, function (err, user) {\r\n            user.events.push(event);\r\n            user.save();\r\n            console.log(\"this is req.user\", User.events)\r\n        })\r\n        res.status(200).json('ok. event added to DB!')\r\n    } catch (err) {\r\n        res.json(err);\r\n    }\r\n}\r\n\r\nasync function getAll(req, res) {\r\n    try {\r\n        let events = await Event.find({})\r\n\r\n        res.status(200).json(events)\r\n    } catch (err) {\r\n        res.json(err);\r\n    }\r\n}\r\n\r\n\r\nasync function eventForUsers(req,res){\r\n    try{\r\n        const event =await Event.find({user:req.params._id})\r\n        .populate('user')\r\n        .exec();\r\n        console.log(event)\r\n        res.status(200).json(event);\r\n \r\n    } catch(err){\r\n        console.log(err);\r\n    }\r\n }\r\n "],"file":"events.dev.js"}