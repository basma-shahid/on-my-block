{"version":3,"sources":["events.js"],"names":["Event","require","User","module","exports","create","eventForUsers","req","res","name","body","location","user","_id","event","console","log","findById","err","events","push","save","status","json","find","params","populate","exec"],"mappings":";;AAAA,IAAMA,KAAK,GAAGC,OAAO,CAAC,iBAAD,CAArB;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,gBAAD,CAApB;;AAEAE,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,MAAM,EAANA,MADa;AAEbC,EAAAA,aAAa,EAAbA;AAFa,CAAjB,C,CAMA;;AACA,SAAeD,MAAf,CAAsBE,GAAtB,EAA2BC,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAE4BR,KAAK,CAACK,MAAN,CAAa;AAC7BI,YAAAA,IAAI,EAAEF,GAAG,CAACG,IAAJ,CAASD,IADc;AAE7BE,YAAAA,QAAQ,EAAEJ,GAAG,CAACG,IAAJ,CAASC,QAFU;AAG7BC,YAAAA,IAAI,EAAEL,GAAG,CAACK,IAAJ,CAASC;AAHc,WAAb,CAF5B;;AAAA;AAEcC,UAAAA,KAFd;AAOQC,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCT,GAAG,CAACK,IAAxC;AACAG,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BT,GAAG,CAACK,IAAJ,CAASC,GAAnC;AAEAX,UAAAA,IAAI,CAACe,QAAL,CAAcV,GAAG,CAACK,IAAJ,CAASC,GAAvB,EAA4B,UAASK,GAAT,EAAcN,IAAd,EAAmB;AAC3CA,YAAAA,IAAI,CAACO,MAAL,CAAYC,IAAZ,CAAiBN,KAAjB;AACAF,YAAAA,IAAI,CAACS,IAAL;AACAN,YAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCd,IAAI,CAACiB,MAArC;AACH,WAJD;AAKAX,UAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,wBAArB;AAhBR;AAAA;;AAAA;AAAA;AAAA;AAkBQf,UAAAA,GAAG,CAACe,IAAJ;;AAlBR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAuBA,SAAejB,aAAf,CAA6BC,GAA7B,EAAiCC,GAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAE2BR,KAAK,CAACwB,IAAN,CAAW;AAACZ,YAAAA,IAAI,EAACL,GAAG,CAACkB,MAAJ,CAAWZ;AAAjB,WAAX,EAClBa,QADkB,CACT,MADS,EAElBC,IAFkB,EAF3B;;AAAA;AAEcb,UAAAA,KAFd;AAKQC,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAN,UAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBT,KAArB;AANR;AAAA;;AAAA;AAAA;AAAA;AASQC,UAAAA,OAAO,CAACC,GAAR;;AATR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["const Event = require('../models/event')\r\nconst User = require('../models/user')\r\n\r\nmodule.exports = {\r\n    create,\r\n    eventForUsers\r\n\r\n}\r\n\r\n//function receives the events from the browser and puts it in the db\r\nasync function create(req, res) {\r\n    try {\r\n        const event = await Event.create({\r\n            name: req.body.name,\r\n            location: req.body.location,\r\n            user: req.user._id\r\n        });\r\n        console.log(event)\r\n        console.log(\"this is the req.user\", req.user)\r\n        console.log(\"this is id\", req.user._id)\r\n\r\n        User.findById(req.user._id, function(err, user){\r\n            user.events.push(event);\r\n            user.save();\r\n            console.log(\"this is req.user\", User.events)\r\n        })\r\n        res.status(200).json('ok. event added to DB!')\r\n    } catch(err) {\r\n        res.json(err);\r\n    }\r\n}\r\n\r\n\r\nasync function eventForUsers(req,res){\r\n    try{\r\n        const event =await Event.find({user:req.params._id})\r\n        .populate('user')\r\n        .exec();\r\n        console.log(event)\r\n        res.status(200).json(event);\r\n \r\n    } catch(err){\r\n        console.log(err);\r\n    }\r\n }\r\n "],"file":"events.dev.js"}