{"version":3,"sources":["events.js"],"names":["Event","require","User","create","req","res","event","regeneratorRuntime","async","_context","prev","next","awrap","name","body","location","user","_id","sent","console","log","err","events","save","json","t0","stop","find","params","populate","exec","status","module","exports","eventForUsers"],"mappings":"aAAA,IAAMA,MAAQC,QAAQ,mBAChBC,KAAOD,QAAQ,kBASrB,SAAeE,OAAOC,EAAKC,GAA3B,IAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAAAJ,mBAAAK,MAAAZ,MAAAG,OAAA,CAAAU,KAAAT,EAAAU,KAAAD,KAAAE,SAAAX,EAAAU,KAAAC,SAAAC,KAAAZ,EAAAY,KAAAC,OAAA,KAAA,EAAAX,EAAAG,EAAAS,KAAAC,QAAAC,IAAAd,GAAAa,QAAAC,IAAA,uBAAAhB,EAAAY,MAAAG,QAAAC,IAAA,aAAAhB,EAAAY,KAE4BhB,KAEhBe,KAAAA,SAAUX,EAAIU,KAAKC,IAAAA,SAFUM,EAAAL,GAG7BA,EAAIM,OAAMN,KAAKC,GAL3BD,EAAAO,OAcYJ,QAAQC,IAAI,mBAAoBlB,KAAKoB,UAZnChB,EAAAA,OAFd,KAAAkB,KAAA,0BAAAf,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAAF,EAAAC,KAAA,GAAAD,EAAAgB,GAAAhB,EAAA,MAAA,GAQQU,EAAAA,KAAAA,EAAAA,IARR,KAAA,GAAA,IAAA,MAAA,OAAAV,EAAAiB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,MAcYP,SAAAA,cAAYf,EAAAC,GAAZc,IAAAA,EAAAA,OAAAA,mBAAAA,MAAAA,SAAAA,GAAAA,OAAAA,OAAAA,EAAAA,KAAAA,EAAAA,MAAAA,KAAAA,EAAAA,OAAAA,EAAAA,KAAAA,EAAAA,EAAAA,KAAAA,EAAAA,mBAAAA,MAEYK,MAAKG,KAAA,CAAAX,KAAAZ,EAAAwB,OAArBX,MAhBRY,SAAA,QAAAC,QAcYX,KAAAA,EAEAY,EAFAZ,EAAAA,KAcJA,QAAQC,IAAId,GA5BpBD,EAAA0B,OAAA,KAAAP,KAAAlB,GAcYa,EAAAA,KAAAA,GAAAA,MAAAA,KAAAA,EAAAA,EAAAA,KAAAA,EAAAA,EAAAA,GAAAA,EAAAA,MAAAA,GAIJd,QAAImB,IAAJnB,EAAAA,IAJIc,KAAAA,GAAAA,IAAAA,MAAAA,OAAAA,EAAAA,SAAAA,KAAAA,KAAAA,CAAAA,CAAAA,EAAAA,KArBZa,OAAOC,QAAU,CAFX/B,OAAAA,OAIFgC,cAAAA","file":"events.min.js","sourcesContent":["const Event = require('../models/event')\r\nconst User = require('../models/user')\r\n\r\nmodule.exports = {\r\n    create,\r\n    eventForUsers\r\n\r\n}\r\n\r\n//function receives the events from the browser and puts it in the db\r\nasync function create(req, res) {\r\n    try {\r\n        const event = await Event.create({\r\n            name: req.body.name,\r\n            location: req.body.location,\r\n            user: req.user._id\r\n        });\r\n        console.log(event)\r\n        console.log(\"this is the req.user\", req.user)\r\n        console.log(\"this is id\", req.user._id)\r\n\r\n        User.findById(req.user._id, function(err, user){\r\n            user.events.push(event);\r\n            user.save();\r\n            console.log(\"this is req.user\", User.events)\r\n        })\r\n        res.status(200).json('ok. event added to DB!')\r\n    } catch(err) {\r\n        res.json(err);\r\n    }\r\n}\r\n\r\n\r\nasync function eventForUsers(req,res){\r\n    try{\r\n        const event =await Event.find({user:req.params._id})\r\n        .populate('user')\r\n        .exec();\r\n        console.log(event)\r\n        res.status(200).json(event);\r\n \r\n    } catch(err){\r\n        console.log(err);\r\n    }\r\n }\r\n "]}