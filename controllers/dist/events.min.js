"use strict";var Event=require("../models/event"),User=require("../models/user");function create(t,n){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Event.create({name:t.body.name,location:t.body.location,lat:t.body.lat,lng:t.body.lng,time:t.body.time,user:t.user._id}));case 3:r=e.sent,console.log(r),console.log("this is the req.user",t.user),console.log("this is id",t.user._id),User.findById(t.user._id,function(e,t){t.events.push(r),t.save(),console.log("this is req.user",User.events)}),n.status(200).json("ok. event added to DB!"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n.json(e.t0);case 14:case"end":return e.stop()}},null,null,[[0,11]])}function getAll(e,t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Event.find({}));case 3:n=e.sent,t.status(200).json(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.json(e.t0);case 10:case"end":return e.stop()}},null,null,[[0,7]])}function eventForUsers(t,n){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Event.find({user:t.params._id}).populate("user").exec());case 3:r=e.sent,console.log(r),n.status(200).json(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},null,null,[[0,8]])}module.exports={create:create,eventForUsers:eventForUsers,getAll:getAll};
//# sourceMappingURL=events.min.js.map
